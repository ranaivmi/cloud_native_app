---
- name: VM Configuration Playbook
  hosts: localhost
  gather_facts: no
  environment:
    OS_AUTH_URL: "http://10.11.50.7:5000/v3"
    OS_REGION_NAME: regionOne
    OS_PROJECT_NAME: Lab5
    OS_USER_DOMAIN_NAME: Default
    OS_IDENTITY_API_VERSION: 3
    OS_INTERFACE: public
    OS_PASSWORD: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      31396361373836366266353033313236323832643738623861323365393362313762616530333633
      3736306136336662333537316530613864323061306162310a353930366233343062303561376462
      31396435643563643239363130333631346634666531663565373137363430376564643335383763
      3138333863393565300a626566656135616365663864613034393261653633613862393034353061
      6165
    OS_USERNAME: Lab5
    OS_PROJECT_ID: 047be794366c4ddd89efeb2fc77741b5
  tasks:
    - include_tasks: createTestServer.yml
    - include_tasks: attach_floatingIP.yml
    - include_tasks: wait_for_ssh.yml