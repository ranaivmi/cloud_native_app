---
- name: VM Configuration Playbook
  hosts: localhost
  gather_facts: no
  environment:
    OS_USERNAME: admin
    OS_PASSWORD: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      33666639326337326137313737313738343566303331326138306431613161383738383436623637
      6136386430316464303966313266363239643331383465300a303838616336656662613666333863
      34396531336439653663356363313164666335323739316237633162663835323539323165666437
      3936333337633736620a396134303465326236626663643661383830356662313766323133343230
      66393832613963356435303861346432633261326661396635343236353434646263
    OS_AUTH_URL: "http://10.11.51.161:5000/v3"
    OS_PROJECT_NAME: admin
    OS_USER_DOMAIN_NAME: Default
    OS_PROJECT_DOMAIN_NAME: Default
    OS_IDENTITY_API_VERSION: 3
  tasks:
    - include_tasks: createTestServer.yml
    - include_tasks: attach_floatingIP.yml
    - include_tasks: wait_for_ssh.yml